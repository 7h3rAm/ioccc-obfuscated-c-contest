<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr"
 lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="KEYWORDS" content="Most superfluous output">
  <meta name="robots" content="index,follow">
  <link rel="shortcut icon" href="/favicon.ico">
  <title>Most superfluous output</title>
  <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins/monobook/main.css"; /*]]>*/</style>
  <link rel="stylesheet" type="text/css" media="print"
 href="/skins/common/commonPrint.css">
<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/monobook/IE50Fixes.css";</style><![endif]--><!--[if IE 5.5000]><style type="text/css">@import "/skins/monobook/IE55Fixes.css";</style><![endif]--><!--[if gte IE 6]><style type="text/css">@import "/skins/monobook/IE60Fixes.css";</style><![endif]--><!--[if IE]><script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
  <script type="text/javascript"
 src="/index.php?title=-&amp;action=raw&amp;gen=js"></script>
  <script type="text/javascript" src="/skins/common/wikibits.js"></script>
  <style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
</head>
<body class="ns-0">
<div id="globalWrapper">
<div id="column-content">
<div id="content"> <a name="top" id="top"></a>
<h1 class="firstHeading">Most superfluous output</h1>
<div id="bodyContent">
<!-- start content -->
<p><b>Most Superfluous Output</b>
</p>
<pre>   Francois Boutines<br>   Toulouse, France<br></pre>
<pre>   francois.boutines@gmail.com<br></pre>
<table style="width: 459px; height: 176px;" id="toc" class="toc">
  <tbody>
    <tr>
      <td>
      <div id="toctitle">
      <h2>Contents</h2>
      </div>
      <ul>
        <li class="toclevel-1"><a href="#Judges.27_Comments"><span
 class="tocnumber">1</span> <span class="toctext">Judges' Comments</span></a>
          <ul>
            <li class="toclevel-2"><a href="#To_build"><span
 class="tocnumber">1.1</span> <span class="toctext">To build</span></a></li>
            <li class="toclevel-2"><a href="#To_run"><span
 class="tocnumber">1.2</span> <span class="toctext">To run</span></a></li>
          </ul>
        </li>
        <li class="toclevel-1"><a href="#Selected_Author.27s_Comments"><span
 class="tocnumber">2</span> <span class="toctext">Selected Author's
Comments</span></a>
          <ul>
            <li class="toclevel-2"><a href="#Walkthrough"><span
 class="tocnumber">2.1</span> <span class="toctext">Walkthrough</span></a></li>
            <li class="toclevel-2"><a href="#Caution"><span
 class="tocnumber">2.2</span> <span class="toctext">Caution</span></a></li>
            <li class="toclevel-2"><a
 href="#Why_I_think_this_code_is_Obfuscated_.3F"><span class="tocnumber">2.3</span>
              <span class="toctext">Why I think this code is
Obfuscated&nbsp;?</span></a></li>
            <li class="toclevel-2"><a href="#Missing_Features"><span
 class="tocnumber">2.4</span> <span class="toctext">Missing Features</span></a></li>
          </ul>
        </li>
        <li class="toclevel-1"><a href="#See_Also"><span
 class="tocnumber">3</span> <span class="toctext">See Also</span></a></li>
        <li class="toclevel-1"><a href="#Example_Output"><span
 class="tocnumber">4</span> <span class="toctext">Example Output</span></a></li>
      </ul>
      </td>
    </tr>
  </tbody>
</table>
<p>
<script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script></p>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="Judges.27_Comments"></a>
<h2>Judges' Comments</h2>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="To_build"></a>
<h3>To build</h3>
<pre>  cc -o boutines boutines.c<br></pre>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="To_run"></a>
<h3>To run</h3>
<p>Go to <a href="http://www.adobe.com/svg/viewer/install/"
 class="external free" title="http://www.adobe.com/svg/viewer/install/"
 rel="nofollow">http://www.adobe.com/svg/viewer/install/</a> and
install an
SVG viewer for your browser, then
</p>
<pre>  perl -e 'map{print rand," ",rand,"\n";}(1..20);' | ./boutines &gt; test.svg<br></pre>
<p>and browse to test.svg. Can you explain the author's remark
"[generated files] are not as scalable as their name suggests"?
</p>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="Selected_Author.27s_Comments"></a>
<h2>Author's Comments</h2>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<span style="font-style: italic;" lang="EN-GB"> In
memory of my father Pierre Boutines-Vignard.<br>
<br>
</span><a name="Walkthrough"></a>
<h3>Walkthrough</h3>
<p>My program works as follows&nbsp;:
</p>
<dl>
  <dt> Input&nbsp;</dt>
  <dd> a list of 2D points in the unit square </dd>
  <dt> Output&nbsp;</dt>
  <dd> a Voronoi diagram of the set as an <a
 href="http://www.w3.org/TR/SVG/" class="external text"
 title="http://www.w3.org/TR/SVG/" rel="nofollow">SVG</a> stream </dd>
</dl>
<p><br>
This will possibly save a compressed SVG file and may be useful&nbsp;:
</p>
<pre>  ./boutines | gzip &gt; result.svgz<br></pre>
<p>Input consists of a list of floating points values separated by
whitespaces (ranging preferably in [0,1]). Alternating an horizontal
coordinate, a whitespace then the other coordinate (pointing downwards
in the resulting graph) and a newline will just go fine&nbsp;:
</p>
<pre>   0 0<br>   0 1<br>   1 0<br>   1 1<br>   .5 .5<br></pre>
<p>Strictly speaking, you have to provide a <b>set</b> of points. If
there are duplicates in the list, there is no guarantee on the one to
be shown (in addition their labels will overlap) in the resulting
colored Voronoi diagram.
</p>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="Caution"></a>
<h3>Caution</h3>
<p>This program might have been a lot shorter, but nearly impractical
even for medium sized datasets. On the other hand it could have been a
lot faster, but hard to qualify under the IOCCC size limit. So guess
what... I did a compromise favoring innermost obfuscation, sacrificing
sometimes speed and other tedious factors.
</p>
<p>Therefore this entry is limited to
&lt;math&gt;floor\bigg(\frac{10^6}{4\times(sizeof(double)+1)}-1\bigg)&lt;/math&gt;
points and won't even be suitable for more than a few thousand&nbsp;:
although generated files do pass <a
 href="http://jiggles.w3.org/svgvalidator/" class="external text"
 title="http://jiggles.w3.org/svgvalidator/" rel="nofollow">W3C SVG
Validator</a>, and are highly compressible, they are not as scalable as
their name suggests... For serious applications about Voronoi diagrams,
see <a href="http://www.qhull.org/" class="external text"
 title="http://www.qhull.org/" rel="nofollow">Qhull</a>, <a
 href="http://www.cgal.org/" class="external text"
 title="http://www.cgal.org/" rel="nofollow">CGAL</a> and the
like&nbsp;: but you may still encounter large output volumes (and have
to handle some sort of clipping in order to represent properly infinite
regions of the diagram in SVG).
</p>
<p>Beware, compilation may report warnings about precision loss,
linting may be a disaster, but the code should remain portable, and the
output accurate enough for most devices (including many inkjet
printers). If you ever miss precision on a particular dataset or
peripheral, you may want to dive in and let U be the next power of
__LINE__.
</p>
<p>Note&nbsp;: bad inputs will be sanctioned by the production of the
42nd(?) Mersenne prime (ie. &lt;math&gt;2^{25964951}-1&lt;/math&gt;),
memory will be kept.
</p>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="Why_I_think_this_code_is_Obfuscated_.3F"></a>
<h3>Why I think this code is Obfuscated&nbsp;?</h3>
<p>I'm quite divided on the subject because I wrote&nbsp;:
</p>
<ul>
  <li>clear SVG key words but complicated output statements </li>
  <li>no nested loops but loads of function calls </li>
  <li>easy recursion but no clear data struture </li>
  <li>easy maths but no use of math.h </li>
  <li>a single if </li>
</ul>
<p>Be sure to check the antepenultimate line of code.
</p>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="Missing_Features"></a>
<h3>Missing Features</h3>
<dl>
  <dt> Color control&nbsp;</dt>
  <dd> Cell colors are chosen randomly (with a questionable rejection
scheme). It might have been useful to input them along with sites
coordinates, turning the application into a puzzling graphics engine. </dd>
</dl>
<dl>
  <dt> Site labelling&nbsp;</dt>
  <dd> The points are implicitly numbered in the order they were
entered (starting at one). This can be overridden however, via a simple
XSL transformation. </dd>
</dl>
<dl>
  <dt> Site radius&nbsp;</dt>
  <dd> The site radius is hardwired in the code, I still wonder why I
did not design it as a function of the underlying cellâ€™s area (which
can be averaged for free) or at least a command line parameter. Same
with the char set, the viewport and potentially every SVG property. </dd>
</dl>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="See_Also"></a>
<h2>See Also</h2>
<p><a href="http://en.wikipedia.org/wiki/Voronoi_diagram"
 class="external text"
 title="http://en.wikipedia.org/wiki/Voronoi diagram" rel="nofollow">Voronoi
at Wikipedia</a>
</p>
<p><a
 href="http://www2.toki.or.id/book/AlgDesignManual/BOOK/BOOK4/NODE187.HTM"
 class="external text"
 title="http://www2.toki.or.id/book/AlgDesignManual/BOOK/BOOK4/NODE187.HTM"
 rel="nofollow">An Excerpt from The Algorithm Design Manual</a>
</p>
<p><a href="http://www.snibbe.com/scott/bf/" class="external text"
 title="http://www.snibbe.com/scott/bf/" rel="nofollow">Voronoi and Art</a>
</p>
<div class="editsection" style="float: right; margin-left: 5px;"><br>
</div>
<a name="Example_Output"></a>
<h2>Example Output</h2>
<p><a href="/index.php?title=Image:Voronoi.png" class="image"
 title="Voronoi diagram of two regular pentagon vertices"><img
 src="Voronoi.png"
 alt="Voronoi diagram of two regular pentagon vertices"
 longdesc="/index.php?title=Image:Voronoi.png"
 style="border: 0px solid ; width: 542px; height: 542px;"></a>
</p>
<br>
</div>
</div>
</div>
</div>
<!-- Served by infong241 in 0.45 secs. -->
</body>
</html>
